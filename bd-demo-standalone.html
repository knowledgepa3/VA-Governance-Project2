<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ACE BD Dashboard - Standalone Demo</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: #f5f7fa;
      color: #1a1a1a;
    }

    .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }

    header {
      background: white;
      padding: 1.5rem 2rem;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 2rem;
    }

    .logo {
      font-size: 1.75rem;
      font-weight: 800;
      color: #3b82f6;
    }

    .dashboard-header h1 { font-size: 2rem; margin-bottom: 0.5rem; }
    .subtitle { color: #666; }

    .action-bar {
      display: flex;
      gap: 1rem;
      margin: 2rem 0;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      font-size: 0.875rem;
    }

    .btn-primary { background: #3b82f6; color: white; }
    .btn-success { background: #10b981; color: white; }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .metric-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .metric-label {
      font-size: 0.875rem;
      color: #666;
      margin-bottom: 0.5rem;
    }

    .metric-value {
      font-size: 1.875rem;
      font-weight: 700;
    }

    .opportunities-list { display: grid; gap: 1rem; }

    .opportunity-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .opportunity-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transform: translateY(-2px);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
    }

    .card-header h3 { font-size: 1rem; margin-bottom: 0.25rem; }
    .opportunity-title { color: #666; font-size: 0.875rem; }

    .badge {
      padding: 0.375rem 0.75rem;
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 600;
      white-space: nowrap;
    }

    .badge-success { background: #d1fae5; color: #065f46; }
    .badge-info { background: #dbeafe; color: #1e40af; }
    .badge-warning { background: #fef3c7; color: #92400e; }
    .badge-danger { background: #fee2e2; color: #991b1b; }

    .opportunity-details {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
    }

    .detail-item { display: flex; flex-direction: column; gap: 0.25rem; }
    .detail-item .label { font-size: 0.75rem; color: #666; }
    .detail-item .value { font-weight: 600; }

    .empty-state {
      text-align: center;
      padding: 4rem 2rem;
      color: #666;
    }

    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">ACE</div>
  </header>

  <div class="container">
    <div class="dashboard-header">
      <h1>Business Development Dashboard</h1>
      <p class="subtitle">Governed RFP Qualification Pipeline - Standalone Demo</p>
    </div>

    <div class="action-bar">
      <button class="btn btn-primary" id="ingestBtn" onclick="ingestRFPs()">üì• Ingest RFPs</button>
      <button class="btn btn-success" id="qualifyBtn" onclick="qualifyAll()" disabled>üöÄ Qualify All</button>
    </div>

    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-label">Total Opportunities</div>
        <div class="metric-value" id="totalOpps">0</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Strong Bids</div>
        <div class="metric-value" id="strongBids">0</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Pipeline Value</div>
        <div class="metric-value" id="pipelineValue">$0.0M</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Avg Win Probability</div>
        <div class="metric-value" id="avgWinProb">0.0%</div>
      </div>
    </div>

    <div id="opportunitiesContainer" class="opportunities-list">
      <div class="empty-state">
        <p>No opportunities yet.</p>
        <p>Click "Ingest RFPs" to load sample opportunities, then "Qualify All" to analyze them.</p>
      </div>
    </div>
  </div>

  <script>
    let opportunities = [];

    const sampleRFPs = [
      { rfpNumber: '140D0423R0003', title: 'IT Support Services - VA', agency: 'Department of Veterans Affairs', value: 2500000, deadline: '2024-03-15' },
      { rfpNumber: '70CMSD24R00000071', title: 'Cloud Migration - GSA', agency: 'General Services Administration', value: 4200000, deadline: '2024-03-25' },
      { rfpNumber: 'HHS75N98023R00123', title: 'Healthcare IT Modernization', agency: 'HHS', value: 5500000, deadline: '2024-04-20' },
      { rfpNumber: '693JJ324Q000001', title: 'NASA Mission Support', agency: 'NASA', value: 1200000, deadline: '2024-03-20' },
      { rfpNumber: 'EPA-DC-DW-24-01', title: 'Environmental Data Portal', agency: 'EPA', value: 980000, deadline: '2024-03-28' }
    ];

    function ingestRFPs() {
      opportunities = sampleRFPs.map(rfp => ({
        ...rfp,
        winProb: null,
        decision: null,
        status: 'new'
      }));

      document.getElementById('qualifyBtn').disabled = false;
      updateMetrics();
      renderOpportunities();
    }

    function qualifyAll() {
      const btn = document.getElementById('qualifyBtn');
      btn.innerHTML = '<span class="spinner"></span> Qualifying...';
      btn.disabled = true;

      setTimeout(() => {
        opportunities = opportunities.map(opp => {
          const winProb = Math.floor(Math.random() * 40) + 40; // 40-80%
          const decision = winProb > 70 ? 'strong' : winProb > 50 ? 'qualified' : 'caution';
          return { ...opp, winProb, decision, status: 'analyzed' };
        });

        updateMetrics();
        renderOpportunities();

        btn.innerHTML = 'üöÄ Qualify All';
        btn.disabled = false;
      }, 2000);
    }

    function updateMetrics() {
      document.getElementById('totalOpps').textContent = opportunities.length;

      const strong = opportunities.filter(o => o.decision === 'strong').length;
      document.getElementById('strongBids').textContent = strong;

      const totalValue = opportunities.reduce((sum, o) => sum + o.value, 0);
      document.getElementById('pipelineValue').textContent = '$' + (totalValue / 1000000).toFixed(1) + 'M';

      const avgProb = opportunities.length > 0
        ? opportunities.reduce((sum, o) => sum + (o.winProb || 0), 0) / opportunities.length
        : 0;
      document.getElementById('avgWinProb').textContent = avgProb.toFixed(1) + '%';
    }

    function renderOpportunities() {
      const container = document.getElementById('opportunitiesContainer');

      if (opportunities.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <p>No opportunities yet.</p>
            <p>Click "Ingest RFPs" to load sample opportunities.</p>
          </div>
        `;
        return;
      }

      container.innerHTML = opportunities.map(opp => `
        <div class="opportunity-card">
          <div class="card-header">
            <div>
              <h3>${opp.rfpNumber}</h3>
              <p class="opportunity-title">${opp.title}</p>
            </div>
            <div class="badge badge-${getBadgeClass(opp.decision)}">
              ${getBadgeLabel(opp.decision)}
            </div>
          </div>
          <div class="opportunity-details">
            <div class="detail-item">
              <span class="label">AGENCY</span>
              <span class="value">${opp.agency}</span>
            </div>
            <div class="detail-item">
              <span class="label">VALUE</span>
              <span class="value">$${(opp.value / 1000000).toFixed(2)}M</span>
            </div>
            <div class="detail-item">
              <span class="label">DEADLINE</span>
              <span class="value">${opp.deadline}</span>
            </div>
            <div class="detail-item">
              <span class="label">WIN PROB</span>
              <span class="value">${opp.winProb ? opp.winProb.toFixed(1) + '%' : 'N/A'}</span>
            </div>
          </div>
        </div>
      `).join('');
    }

    function getBadgeClass(decision) {
      if (decision === 'strong') return 'success';
      if (decision === 'qualified') return 'info';
      if (decision === 'caution') return 'warning';
      return 'danger';
    }

    function getBadgeLabel(decision) {
      if (decision === 'strong') return 'üéØ Strong Bid';
      if (decision === 'qualified') return '‚úÖ Qualified';
      if (decision === 'caution') return '‚ö†Ô∏è Caution';
      if (!decision) return 'Pending';
      return '‚ùå No-Bid';
    }
  </script>
</body>
</html>
