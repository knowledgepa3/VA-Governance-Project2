<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GIA Onboarding | Get Started</title>
  <meta name="description" content="Set up your GIA governance platform in 5 minutes. Domain configuration, governance rules, and your first governed run.">
  <link rel="icon" type="image/svg+xml" href="/shared/gia-icon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- GIA Shared Theme (design tokens, animations, components) -->
  <link rel="stylesheet" href="/shared/gia-theme.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      /* JARVIS-inspired palette - dark with cyan/blue accents */
      --primary: #4a9eff;
      --primary-dark: #3a7ecc;
      --primary-glow: rgba(74, 158, 255, 0.3);
      --secondary: #6b8f71;
      --accent-cyan: #00d4ff;
      --accent-warm: #c9a227;
      --dark: #0a0a0c;
      --gray-900: #0d1117;
      --gray-800: #161b22;
      --gray-700: #21262d;
      --gray-600: #30363d;
      --gray-500: #484f58;
      --gray-400: #8b949e;
      --gray-300: #c9d1d9;
      --gray-100: #f0f6fc;
      --white: #f0f6fc;
      --success: #6b8f71;
      --warning: #d9af6a;
      --err: #f85149;

      /* JARVIS glow effects */
      --glow-primary: 0 0 20px rgba(74, 158, 255, 0.4);
      --glow-cyan: 0 0 15px rgba(0, 212, 255, 0.3);
    }

    body {
      font-family: 'JetBrains Mono', 'SF Mono', 'Consolas', monospace;
      background: var(--dark);
      color: var(--gray-300);
      line-height: 1.5;
      min-height: 100vh;
      font-size: 0.9rem;
    }

    /* Header */
    .header {
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--gray-700);
      background: var(--gray-900);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      color: var(--primary);
      text-transform: uppercase;
    }

    .logo-reactor {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: radial-gradient(circle at center, var(--primary) 0%, var(--dark) 70%);
      border: 2px solid var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: arcReactorPulse 3s ease-in-out infinite;
      position: relative;
    }

    .logo-reactor::before {
      content: '';
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent-cyan);
      box-shadow: 0 0 10px var(--accent-cyan);
    }

    .logo-reactor::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      border: 1px solid var(--primary);
      border-radius: 50%;
      opacity: 0.5;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .header-status {
      font-size: 0.65rem;
      color: var(--accent-cyan);
      letter-spacing: 0.1em;
      padding: 0.25rem 0.5rem;
      border: 1px solid var(--accent-cyan);
      opacity: 0.7;
      animation: borderGlow 2s ease-in-out infinite;
    }

    .help-link {
      color: var(--gray-400);
      text-decoration: none;
      font-size: 0.875rem;
    }

    .help-link:hover {
      color: var(--white);
    }

    /* Main Layout */
    .main-layout {
      display: flex;
      min-height: calc(100vh - 60px);
    }

    /* Sidebar Progress */
    .sidebar {
      width: 280px;
      background: var(--gray-900);
      border-right: 1px solid var(--gray-700);
      padding: 2rem;
      position: sticky;
      top: 0;
      height: calc(100vh - 60px);
    }

    .sidebar-title {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--gray-500);
      margin-bottom: 1.5rem;
    }

    .progress-steps {
      list-style: none;
    }

    .progress-step {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      padding: 1rem 0;
      position: relative;
    }

    .progress-step:not(:last-child)::after {
      content: '';
      position: absolute;
      left: 15px;
      top: 48px;
      width: 2px;
      height: calc(100% - 32px);
      background: var(--gray-700);
    }

    .progress-step.completed::after {
      background: var(--secondary);
    }

    .step-indicator {
      width: 28px;
      height: 28px;
      border-radius: 2px;
      background: var(--gray-700);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 600;
      flex-shrink: 0;
      transition: all 0.15s;
    }

    .progress-step.active .step-indicator {
      background: var(--primary);
      color: var(--dark);
      box-shadow: var(--glow-primary);
      animation: arcReactorPulse 2s ease-in-out infinite;
    }

    .progress-step.completed .step-indicator {
      background: var(--secondary);
      color: var(--white);
      box-shadow: 0 0 10px rgba(107, 143, 113, 0.4);
    }

    .progress-step.completed .step-indicator::after {
      content: '✓';
      font-size: 0.7rem;
    }

    .step-content h4 {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--gray-400);
      margin-bottom: 0.25rem;
    }

    .progress-step.active .step-content h4,
    .progress-step.completed .step-content h4 {
      color: var(--white);
    }

    .step-content p {
      font-size: 0.8rem;
      color: var(--gray-500);
    }

    /* Main Content */
    .content {
      flex: 1;
      padding: 3rem;
      max-width: 800px;
    }

    .step-panel {
      display: none;
    }

    .step-panel.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* JARVIS Animations */
    @keyframes arcReactorPulse {
      0%, 100% { box-shadow: 0 0 10px var(--primary-glow), inset 0 0 10px var(--primary-glow); }
      50% { box-shadow: 0 0 25px var(--primary-glow), inset 0 0 15px var(--primary-glow); }
    }

    @keyframes scanLine {
      0% { transform: translateY(-100%); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translateY(100vh); opacity: 0; }
    }

    @keyframes borderGlow {
      0%, 100% { border-color: var(--gray-700); }
      50% { border-color: var(--primary); }
    }

    @keyframes textReveal {
      from { opacity: 0; letter-spacing: 0.3em; }
      to { opacity: 1; letter-spacing: 0.05em; }
    }

    @keyframes dataStream {
      0% { background-position: 0% 0%; }
      100% { background-position: 0% 100%; }
    }

    .panel-header {
      margin-bottom: 2rem;
    }

    .panel-header h1 {
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
      letter-spacing: -0.01em;
    }

    .panel-header p {
      color: var(--gray-400);
      font-size: 0.9rem;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .form-sublabel {
      display: block;
      color: var(--gray-500);
      font-size: 0.85rem;
      margin-bottom: 0.75rem;
    }

    .form-input {
      width: 100%;
      padding: 0.6rem 0.75rem;
      background: var(--gray-800);
      border: 1px solid var(--gray-700);
      border-radius: 2px;
      color: var(--white);
      font-size: 0.85rem;
      font-family: inherit;
      transition: border-color 0.1s;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .form-input::placeholder {
      color: var(--gray-500);
    }

    /* Option Cards */
    .option-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }

    .option-card {
      position: relative;
    }

    .option-card input {
      position: absolute;
      opacity: 0;
    }

    .option-card label {
      display: block;
      padding: 1rem;
      background: var(--gray-800);
      border: 1px solid var(--gray-700);
      border-radius: 2px;
      cursor: pointer;
      transition: all 0.1s;
    }

    .option-card input:checked + label {
      border-color: var(--primary);
      border-left: 3px solid var(--primary);
      box-shadow: var(--glow-primary), inset 0 0 30px rgba(74, 158, 255, 0.05);
      background: linear-gradient(135deg, var(--gray-800) 0%, rgba(74, 158, 255, 0.05) 100%);
    }

    .option-card label:hover {
      border-color: var(--gray-500);
      transform: translateY(-2px);
      transition: all 0.15s ease;
    }

    .option-icon {
      font-size: 0.7rem;
      margin-bottom: 0.5rem;
      color: var(--gray-500);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .option-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .option-desc {
      font-size: 0.8rem;
      color: var(--gray-500);
    }

    /* Buttons */
    .btn-row {
      display: flex;
      justify-content: space-between;
      margin-top: 2.5rem;
      padding-top: 2rem;
      border-top: 1px solid var(--gray-700);
    }

    .btn {
      padding: 0.6rem 1.25rem;
      border-radius: 2px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.1s;
      border: 1px solid var(--gray-700);
      font-family: inherit;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .btn-primary {
      background: var(--primary);
      color: var(--dark);
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(74, 158, 255, 0.2);
      transition: all 0.2s ease;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      box-shadow: var(--glow-primary);
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: transparent;
      color: var(--gray-300);
    }

    .btn-secondary:hover {
      background: var(--gray-700);
      color: var(--white);
    }

    .btn-success {
      background: var(--secondary);
      color: var(--white);
      border-color: var(--secondary);
    }

    /* Info Box */
    .info-box {
      background: var(--gray-800);
      border: 1px solid var(--gray-700);
      border-left: 3px solid var(--primary);
      border-radius: 0;
      padding: 0.75rem 1rem;
      margin-bottom: 1.25rem;
      display: flex;
      gap: 0.5rem;
      align-items: flex-start;
    }

    .info-box-icon {
      font-size: 0.7rem;
      color: var(--gray-500);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      min-width: 40px;
    }

    .info-box-content {
      font-size: 0.8rem;
      color: var(--gray-300);
      line-height: 1.5;
    }

    /* Governance Sliders */
    .slider-group {
      margin-bottom: 1.5rem;
    }

    .slider-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .slider-label {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .slider-value {
      color: var(--primary);
      font-weight: 500;
      font-size: 0.8rem;
    }

    .slider {
      width: 100%;
      height: 4px;
      border-radius: 0;
      background: var(--gray-700);
      appearance: none;
      outline: none;
    }

    .slider::-webkit-slider-thumb {
      appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 2px;
      background: var(--primary);
      cursor: pointer;
    }

    /* Checklist */
    .checklist {
      list-style: none;
    }

    .checklist-item {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.75rem;
      background: var(--gray-800);
      border-radius: 0;
      margin-bottom: 0.5rem;
      border: 1px solid var(--gray-700);
    }

    .checklist-icon {
      width: 20px;
      height: 20px;
      border-radius: 2px;
      background: var(--gray-700);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.65rem;
    }

    .checklist-item.done .checklist-icon {
      background: var(--secondary);
      color: var(--white);
    }

    /* Summary Card */
    .summary-card {
      background: var(--gray-800);
      border: 1px solid var(--gray-700);
      border-radius: 0;
      padding: 1rem;
      margin-bottom: 1.25rem;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--gray-700);
    }

    .summary-row:last-child {
      border-bottom: none;
    }

    .summary-label {
      color: var(--gray-400);
    }

    .summary-value {
      font-weight: 600;
    }

    /* Completion Screen - JARVIS Style */
    .completion-screen {
      text-align: center;
      padding: 2rem;
    }

    .completion-reactor {
      width: 80px;
      height: 80px;
      margin: 0 auto 1.5rem;
      border-radius: 50%;
      background: radial-gradient(circle at center, var(--primary) 0%, transparent 70%);
      border: 3px solid var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: arcReactorPulse 2s ease-in-out infinite;
      position: relative;
    }

    .completion-reactor::before {
      content: '';
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--accent-cyan);
      box-shadow: 0 0 30px var(--accent-cyan), 0 0 60px var(--primary);
    }

    .completion-reactor::after {
      content: '';
      position: absolute;
      width: 60px;
      height: 60px;
      border: 2px solid var(--primary);
      border-radius: 50%;
      opacity: 0.5;
    }

    .completion-icon {
      font-size: 1rem;
      margin-bottom: 1rem;
      color: var(--primary);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      animation: textReveal 0.5s ease-out;
    }

    .completion-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
      color: var(--white);
      animation: textReveal 0.5s ease-out 0.1s both;
    }

    .completion-subtitle {
      color: var(--gray-400);
      font-size: 0.9rem;
      animation: textReveal 0.5s ease-out 0.2s both;
      margin-bottom: 1.5rem;
    }

    .launch-options {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .launch-card {
      background: var(--gray-800);
      border: 1px solid var(--gray-700);
      border-radius: 2px;
      padding: 1.25rem 1.5rem;
      text-decoration: none;
      color: var(--white);
      transition: all 0.1s;
      min-width: 180px;
    }

    .launch-card:hover {
      border-color: var(--primary);
      border-left: 3px solid var(--primary);
    }

    .launch-card-icon {
      font-size: 0.65rem;
      margin-bottom: 0.5rem;
      color: var(--gray-500);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .launch-card-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .launch-card-desc {
      font-size: 0.8rem;
      color: var(--gray-500);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .main-layout {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
        border-right: none;
        border-bottom: 1px solid var(--gray-700);
      }

      .progress-steps {
        display: flex;
        overflow-x: auto;
        gap: 0.5rem;
      }

      .progress-step {
        flex-direction: column;
        align-items: center;
        text-align: center;
        min-width: 100px;
        padding: 0.5rem;
      }

      .progress-step::after {
        display: none;
      }

      .step-content p {
        display: none;
      }

      .content {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">
      <div class="logo-reactor"></div>
      <span>GIA</span>
    </div>
    <div class="header-right">
      <span class="header-status">INITIALIZING</span>
      <a href="/" class="help-link">Back to Platform</a>
    </div>
  </header>

  <div class="main-layout">
    <!-- Sidebar Progress -->
    <aside class="sidebar">
      <div class="sidebar-title">Setup Progress</div>
      <ul class="progress-steps">
        <li class="progress-step active" data-step="1">
          <div class="step-indicator">1</div>
          <div class="step-content">
            <h4>Welcome</h4>
            <p>Let's get you set up</p>
          </div>
        </li>
        <li class="progress-step" data-step="2">
          <div class="step-indicator">2</div>
          <div class="step-content">
            <h4>Your Domain</h4>
            <p>What workflows do you run?</p>
          </div>
        </li>
        <li class="progress-step" data-step="3">
          <div class="step-indicator">3</div>
          <div class="step-content">
            <h4>Governance</h4>
            <p>Set your control levels</p>
          </div>
        </li>
        <li class="progress-step" data-step="4">
          <div class="step-indicator">4</div>
          <div class="step-content">
            <h4>Integration</h4>
            <p>Connect your tools</p>
          </div>
        </li>
        <li class="progress-step" data-step="5">
          <div class="step-indicator">5</div>
          <div class="step-content">
            <h4>Review</h4>
            <p>Confirm & launch</p>
          </div>
        </li>
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="content">
      <!-- Step 1: Welcome -->
      <div class="step-panel active" data-panel="1">
        <div class="panel-header">
          <h1>Welcome to GIA</h1>
          <p>Let's set up your governed AI workspace in about 5 minutes.</p>
        </div>

        <div class="info-box">
          <span class="info-box-icon">NOTE</span>
          <div class="info-box-content">
            GIA is a governance layer that sits between you and AI tools. Every action is logged, classified, and controlled according to your rules.
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="orgName">Organization Name</label>
          <input type="text" class="form-input" id="orgName" placeholder="Your company or team name">
        </div>

        <div class="form-group">
          <label class="form-label" for="userName">Your Name</label>
          <input type="text" class="form-input" id="userName" placeholder="How should we address you?">
        </div>

        <div class="form-group">
          <label class="form-label" for="userEmail">Email</label>
          <input type="email" class="form-input" id="userEmail" placeholder="you@company.com">
        </div>

        <div class="btn-row">
          <div></div>
          <button class="btn btn-primary" onclick="nextStep()">Get Started →</button>
        </div>
      </div>

      <!-- Step 2: Domain Selection -->
      <div class="step-panel" data-panel="2">
        <div class="panel-header">
          <h1>What's Your Domain?</h1>
          <p>We'll configure governance rules optimized for your workflow type.</p>
        </div>

        <div class="option-grid">
          <div class="option-card" style="border: 2px solid var(--primary); background: rgba(74, 158, 255, 0.05);">
            <input type="radio" name="domain" id="domain-va" value="va-claims" checked onchange="toggleCustomDomain()">
            <label for="domain-va">
              <div class="option-icon" style="background: linear-gradient(135deg, #003366, #0066cc);">VA</div>
              <div class="option-title">VA Claims Support</div>
              <div class="option-desc">Evidence analysis, lay statements, C&P prep, rating optimization</div>
            </label>
          </div>

          <div class="option-card">
            <input type="radio" name="domain" id="domain-bd" value="bd-capture" onchange="toggleCustomDomain()">
            <label for="domain-bd">
              <div class="option-icon">BD</div>
              <div class="option-title">Business Development</div>
              <div class="option-desc">RFP analysis, opportunity capture, proposal support</div>
            </label>
          </div>

          <div class="option-card">
            <input type="radio" name="domain" id="domain-legal" value="legal" onchange="toggleCustomDomain()">
            <label for="domain-legal">
              <div class="option-icon">LEG</div>
              <div class="option-title">Legal & Compliance</div>
              <div class="option-desc">Contract review, regulatory research, policy analysis</div>
            </label>
          </div>

          <div class="option-card">
            <input type="radio" name="domain" id="domain-finance" value="finance" onchange="toggleCustomDomain()">
            <label for="domain-finance">
              <div class="option-icon">FIN</div>
              <div class="option-title">Finance & Accounting</div>
              <div class="option-desc">Financial analysis, reporting, audit support</div>
            </label>
          </div>

          <div class="option-card">
            <input type="radio" name="domain" id="domain-research" value="research" onchange="toggleCustomDomain()">
            <label for="domain-research">
              <div class="option-icon">R&A</div>
              <div class="option-title">Research & Analysis</div>
              <div class="option-desc">Market research, competitive intel, due diligence</div>
            </label>
          </div>

          <div class="option-card">
            <input type="radio" name="domain" id="domain-custom" value="custom" onchange="toggleCustomDomain()">
            <label for="domain-custom">
              <div class="option-icon">CUST</div>
              <div class="option-title">Custom Domain</div>
              <div class="option-desc">I'll describe my specific use case</div>
            </label>
          </div>
        </div>

        <!-- Custom Domain Input (hidden by default) -->
        <div class="form-group" id="customDomainGroup" style="display: none; margin-top: 1.5rem;">
          <label class="form-label" for="customDomainInput">Describe Your Domain</label>
          <span class="form-sublabel">What type of workflows will you be governing?</span>
          <input type="text" class="form-input" id="customDomainInput" placeholder="e.g., Marketing automation, Product management, Engineering ops...">
        </div>

        <div class="btn-row">
          <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
          <button class="btn btn-primary" onclick="nextStep()">Continue →</button>
        </div>
      </div>

      <!-- Step 3: Governance Settings -->
      <div class="step-panel" data-panel="3">
        <div class="panel-header">
          <h1>Governance Settings</h1>
          <p>Control how much oversight you want on AI actions.</p>
        </div>

        <div class="info-box">
          <span class="info-box-icon">MAI</span>
          <div class="info-box-content">
            <strong>MAI Classification:</strong> Every action is classified as Mandatory (requires approval), Advisory (logged with recommendations), or Informational (auto-executed, logged).
          </div>
        </div>

        <div class="slider-group">
          <div class="slider-header">
            <span class="slider-label">Approval Gates</span>
            <span class="slider-value" id="approvalValue">Standard</span>
          </div>
          <input type="range" class="slider" id="approvalSlider" min="1" max="3" value="2"
                 oninput="updateSlider('approval', this.value)">
          <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--gray-500); margin-top: 0.5rem;">
            <span>Minimal</span>
            <span>Standard</span>
            <span>Maximum</span>
          </div>
        </div>

        <div class="slider-group">
          <div class="slider-header">
            <span class="slider-label">Cost Controls</span>
            <span class="slider-value" id="costValue">$50/day</span>
          </div>
          <input type="range" class="slider" id="costSlider" min="1" max="4" value="2"
                 oninput="updateSlider('cost', this.value)">
          <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--gray-500); margin-top: 0.5rem;">
            <span>$10/day</span>
            <span>$50/day</span>
            <span>$200/day</span>
            <span>Unlimited</span>
          </div>
        </div>

        <div class="slider-group">
          <div class="slider-header">
            <span class="slider-label">Evidence Level</span>
            <span class="slider-value" id="evidenceValue">Standard</span>
          </div>
          <input type="range" class="slider" id="evidenceSlider" min="1" max="3" value="2"
                 oninput="updateSlider('evidence', this.value)">
          <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--gray-500); margin-top: 0.5rem;">
            <span>Basic Logs</span>
            <span>+ Screenshots</span>
            <span>+ Video Recording</span>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
          <button class="btn btn-primary" onclick="nextStep()">Continue →</button>
        </div>
      </div>

      <!-- Step 4: Integration -->
      <div class="step-panel" data-panel="4">
        <div class="panel-header">
          <h1>Connect Your Tools</h1>
          <p>GIA works with tools you already use. Select what to connect.</p>
        </div>

        <ul class="checklist">
          <li class="checklist-item done">
            <span class="checklist-icon">✓</span>
            <div>
              <strong>Claude AI</strong>
              <div style="font-size: 0.85rem; color: var(--gray-500);">Primary AI model for task execution</div>
            </div>
          </li>
          <li class="checklist-item">
            <span class="checklist-icon">+</span>
            <div>
              <strong>Browser Automation</strong>
              <div style="font-size: 0.85rem; color: var(--gray-500);">Web research and data collection</div>
            </div>
          </li>
          <li class="checklist-item">
            <span class="checklist-icon">+</span>
            <div>
              <strong>SAM.gov API</strong>
              <div style="font-size: 0.85rem; color: var(--gray-500);">Federal opportunity search (for BD workflows)</div>
            </div>
          </li>
          <li class="checklist-item">
            <span class="checklist-icon">+</span>
            <div>
              <strong>Document Storage</strong>
              <div style="font-size: 0.85rem; color: var(--gray-500);">Google Drive, SharePoint, or local files</div>
            </div>
          </li>
        </ul>

        <div class="info-box" style="border-left-color: var(--secondary);">
          <span class="info-box-icon">TIP</span>
          <div class="info-box-content">
            Don't worry — you can add more integrations later. Let's start simple.
          </div>
        </div>

        <div class="btn-row">
          <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
          <button class="btn btn-primary" onclick="nextStep()">Continue →</button>
        </div>
      </div>

      <!-- Step 5: Review & Complete -->
      <div class="step-panel" data-panel="5">
        <div class="panel-header">
          <h1>Review & Complete</h1>
          <p>Confirm your settings and launch your workspace.</p>
        </div>

        <div class="summary-card">
          <h3 style="margin-bottom: 1rem; font-size: 1rem;">Your Configuration</h3>
          <div class="summary-row">
            <span class="summary-label">Organization</span>
            <span class="summary-value" id="summaryOrg">—</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Domain</span>
            <span class="summary-value" id="summaryDomain">Business Development</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Approval Gates</span>
            <span class="summary-value" id="summaryApproval">Standard</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Cost Limit</span>
            <span class="summary-value" id="summaryCost">$50/day</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Evidence Level</span>
            <span class="summary-value" id="summaryEvidence">Standard</span>
          </div>
        </div>

        <div class="info-box" style="border-left-color: var(--success);">
          <span class="info-box-icon" style="color: var(--success);">GO</span>
          <div class="info-box-content">
            Click <strong>Complete Setup</strong> to initialize your workspace. You'll be able to upload documents and run your first analysis immediately.
          </div>
        </div>

        <div class="btn-row">
          <button class="btn btn-secondary" onclick="prevStep()">← Back</button>
          <button class="btn btn-success" onclick="completeSetup()" id="completeBtn">Complete Setup →</button>
        </div>
      </div>

      <!-- Completion Screen -->
      <div class="step-panel" data-panel="complete">
        <div class="completion-screen">
          <div class="completion-reactor"></div>
          <div class="completion-icon">SYSTEM ONLINE</div>
          <h1 class="completion-title">GIA Initialized</h1>
          <p class="completion-subtitle">Your governed intelligence workspace is configured and ready.</p>

          <div class="launch-options" id="launchOptions">
            <!-- Dynamically populated based on domain selection -->
          </div>

          <p style="margin-top: 2rem; color: var(--gray-500); font-size: 0.9rem;">
            Questions? Email <a href="mailto:support@aceadvising.com" style="color: var(--primary);">support@aceadvising.com</a>
          </p>
        </div>
      </div>
    </main>
  </div>

  <script>
    let currentStep = 1;
    const totalSteps = 5;

    function updateProgressBar() {
      document.querySelectorAll('.progress-step').forEach((step, index) => {
        const stepNum = index + 1;
        step.classList.remove('active', 'completed');

        if (stepNum < currentStep) {
          step.classList.add('completed');
          step.querySelector('.step-indicator').textContent = '✓';
        } else if (stepNum === currentStep) {
          step.classList.add('active');
          step.querySelector('.step-indicator').textContent = stepNum;
        } else {
          step.querySelector('.step-indicator').textContent = stepNum;
        }
      });
    }

    function showPanel(stepNum) {
      document.querySelectorAll('.step-panel').forEach(panel => {
        panel.classList.remove('active');
      });

      const targetPanel = document.querySelector(`[data-panel="${stepNum}"]`);
      if (targetPanel) {
        targetPanel.classList.add('active');
      }
    }

    function nextStep() {
      // Validate current step before advancing
      if (currentStep === 1) {
        const orgName = document.getElementById('orgName').value.trim();
        const userName = document.getElementById('userName').value.trim();
        const userEmail = document.getElementById('userEmail').value.trim();

        if (!orgName || !userName || !userEmail) {
          showValidationError('Please fill in all fields before continuing.');
          return;
        }
        if (userEmail && !userEmail.includes('@')) {
          showValidationError('Please enter a valid email address.');
          return;
        }
        clearValidationError();
      }

      if (currentStep < totalSteps) {
        currentStep++;
        updateProgressBar();
        showPanel(currentStep);
        updateSummary();
      }
    }

    function showValidationError(message) {
      // Remove existing error
      clearValidationError();
      const errDiv = document.createElement('div');
      errDiv.id = 'validationError';
      errDiv.style.cssText = 'background: rgba(248, 81, 73, 0.1); border: 1px solid var(--err); color: var(--err); padding: 0.75rem 1rem; border-radius: 8px; margin-bottom: 1rem; font-size: 0.85rem;';
      errDiv.textContent = message;
      const activePanel = document.querySelector('.step-panel.active');
      if (activePanel) {
        const btnRow = activePanel.querySelector('.btn-row');
        if (btnRow) btnRow.parentNode.insertBefore(errDiv, btnRow);
      }
    }

    function clearValidationError() {
      const existing = document.getElementById('validationError');
      if (existing) existing.remove();
    }

    function prevStep() {
      if (currentStep > 1) {
        currentStep--;
        updateProgressBar();
        showPanel(currentStep);
      }
    }

    function updateSlider(type, value) {
      const values = {
        approval: ['Minimal', 'Standard', 'Maximum'],
        cost: ['$10/day', '$50/day', '$200/day', 'Unlimited'],
        evidence: ['Basic Logs', 'Standard', 'Full Recording']
      };

      document.getElementById(`${type}Value`).textContent = values[type][value - 1];
    }

    function toggleCustomDomain() {
      const customRadio = document.getElementById('domain-custom');
      const customGroup = document.getElementById('customDomainGroup');

      if (customRadio && customGroup) {
        customGroup.style.display = customRadio.checked ? 'block' : 'none';
      }
    }

    function updateSummary() {
      // Organization name
      const orgName = document.getElementById('orgName').value || '—';
      document.getElementById('summaryOrg').textContent = orgName;

      // Domain
      const domainInput = document.querySelector('input[name="domain"]:checked');
      if (domainInput) {
        let domainLabel = 'Unknown';

        // Handle custom domain case
        if (domainInput.value === 'custom') {
          const customInput = document.getElementById('customDomainInput');
          domainLabel = (customInput && customInput.value.trim()) ? customInput.value.trim() : 'Custom Domain';
        } else {
          // Get label from the option-title element
          const labelEl = domainInput.nextElementSibling;
          if (labelEl) {
            const titleEl = labelEl.querySelector('.option-title');
            if (titleEl) {
              domainLabel = titleEl.textContent;
            }
          }
        }

        document.getElementById('summaryDomain').textContent = domainLabel;
      }

      // Approval
      document.getElementById('summaryApproval').textContent = document.getElementById('approvalValue').textContent;

      // Cost
      document.getElementById('summaryCost').textContent = document.getElementById('costValue').textContent;

      // Evidence
      document.getElementById('summaryEvidence').textContent = document.getElementById('evidenceValue').textContent;
    }

    async function completeSetup() {
      // Get domain value and custom domain text if applicable
      const domainInput = document.querySelector('input[name="domain"]:checked');
      const domainValue = domainInput?.value || 'unknown';
      const customDomainText = document.getElementById('customDomainInput')?.value || '';

      // Readable labels for the email notification
      const domainLabels = {
        'va-claims': 'VA Claims Support',
        'bd-capture': 'Business Development',
        'legal': 'Legal & Compliance',
        'finance': 'Finance & Accounting',
        'research': 'Research & Analysis',
        'custom': customDomainText || 'Custom Domain'
      };
      const approvalLabels = ['Minimal', 'Standard', 'Maximum'];
      const costLabels = ['$10/day', '$50/day', '$200/day', 'Unlimited'];
      const evidenceLabels = ['Basic Logs', 'Standard', 'Full Recording'];

      // Build config
      const config = {
        orgName: document.getElementById('orgName').value.trim(),
        userName: document.getElementById('userName').value.trim(),
        userEmail: document.getElementById('userEmail').value.trim(),
        domain: domainValue,
        domainCustomText: domainValue === 'custom' ? customDomainText : '',
        approval: document.getElementById('approvalSlider').value,
        cost: document.getElementById('costSlider').value,
        evidence: document.getElementById('evidenceSlider').value,
        setupComplete: true,
        setupDate: new Date().toISOString()
      };

      // Save config to localStorage
      localStorage.setItem('gia_config', JSON.stringify(config));

      // Send signup notification via Formspree (you get an email for every signup)
      try {
        await fetch('https://formspree.io/f/xwvqggle', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
          body: JSON.stringify({
            _subject: 'New GIA Onboarding Signup',
            name: config.userName,
            email: config.userEmail,
            organization: config.orgName,
            domain: domainLabels[domainValue] || domainValue,
            approval_level: approvalLabels[(config.approval - 1)] || config.approval,
            cost_limit: costLabels[(config.cost - 1)] || config.cost,
            evidence_level: evidenceLabels[(config.evidence - 1)] || config.evidence,
            signup_date: config.setupDate,
            source: 'onboarding-wizard'
          })
        });
        console.log('[Onboarding] Signup notification sent');
      } catch (err) {
        console.warn('[Onboarding] Formspree notification failed (non-critical):', err.message);
      }

      // Populate launch options based on domain
      const launchOptions = document.getElementById('launchOptions');
      if (domainValue === 'va-claims') {
        launchOptions.innerHTML = `
          <a href="/app" class="launch-card" style="border-color: var(--primary); background: rgba(74, 158, 255, 0.05);">
            <div class="launch-card-icon" style="background: linear-gradient(135deg, #003366, #0066cc);">VA</div>
            <div class="launch-card-title">Run VA Claims Analysis</div>
            <div class="launch-card-desc">Upload records and run the full evidence pipeline</div>
          </a>
          <a href="/console" class="launch-card">
            <div class="launch-card-icon">CLI</div>
            <div class="launch-card-title">GIA Console</div>
            <div class="launch-card-desc">Terminal-style workflow interface</div>
          </a>
          <a href="/" class="launch-card">
            <div class="launch-card-icon">ALL</div>
            <div class="launch-card-title">GIA Portal</div>
            <div class="launch-card-desc">All workflows and compliance info</div>
          </a>
        `;
      } else if (domainValue === 'bd-capture') {
        launchOptions.innerHTML = `
          <a href="/app" class="launch-card" style="border-color: var(--primary);">
            <div class="launch-card-icon">BD</div>
            <div class="launch-card-title">BD Dashboard</div>
            <div class="launch-card-desc">Start capturing opportunities</div>
          </a>
          <a href="/console" class="launch-card">
            <div class="launch-card-icon">CLI</div>
            <div class="launch-card-title">GIA Console</div>
            <div class="launch-card-desc">Terminal-style workflow interface</div>
          </a>
          <a href="/" class="launch-card">
            <div class="launch-card-icon">ALL</div>
            <div class="launch-card-title">GIA Portal</div>
            <div class="launch-card-desc">All workflows and compliance info</div>
          </a>
        `;
      } else {
        launchOptions.innerHTML = `
          <a href="/app" class="launch-card" style="border-color: var(--primary);">
            <div class="launch-card-icon">RUN</div>
            <div class="launch-card-title">Launch Workflows</div>
            <div class="launch-card-desc">Access the full GIA workflow engine</div>
          </a>
          <a href="/console" class="launch-card">
            <div class="launch-card-icon">CLI</div>
            <div class="launch-card-title">GIA Console</div>
            <div class="launch-card-desc">Terminal-style workflow interface</div>
          </a>
          <a href="/" class="launch-card">
            <div class="launch-card-icon">ALL</div>
            <div class="launch-card-title">GIA Portal</div>
            <div class="launch-card-desc">All workflows and compliance info</div>
          </a>
        `;
      }

      // Show completion screen
      showPanel('complete');

      // Update header status
      document.querySelector('.header-status').textContent = 'ONLINE';
      document.querySelector('.header-status').style.color = 'var(--success)';

      // Update all steps to completed
      document.querySelectorAll('.progress-step').forEach(step => {
        step.classList.remove('active');
        step.classList.add('completed');
        step.querySelector('.step-indicator').textContent = '✓';
      });
    }

    // Check if already onboarded — offer to go directly to workflows
    const savedConfig = localStorage.getItem('gia_config');
    if (savedConfig) {
      const config = JSON.parse(savedConfig);
      if (config.setupComplete) {
        console.log('[Onboarding] User already onboarded:', config.orgName);
        // Show a "Welcome back" banner at top
        const banner = document.createElement('div');
        banner.style.cssText = 'background: rgba(74, 158, 255, 0.1); border: 1px solid var(--primary); padding: 1rem 1.5rem; margin: 1rem 2rem; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;';
        banner.innerHTML = `
          <div>
            <strong style="color: var(--primary);">Welcome back, ${config.userName || 'operator'}!</strong>
            <span style="color: var(--gray-400); margin-left: 0.5rem;">Setup completed ${new Date(config.setupDate).toLocaleDateString()}</span>
          </div>
          <div style="display: flex; gap: 0.75rem;">
            <a href="/app" style="background: var(--primary); color: white; padding: 0.5rem 1.25rem; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 0.85rem;">Go to Workflows →</a>
            <button onclick="this.parentElement.parentElement.remove()" style="background: var(--gray-700); color: var(--gray-300); border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.85rem;">Redo Setup</button>
          </div>
        `;
        document.querySelector('.main-layout').prepend(banner);
      }
    }
  </script>

  <!-- GIA Shared Core (sounds, API, evidence, utils) -->
  <script src="/shared/gia-core.js"></script>
</body>
</html>
<!-- deployed Wed, Feb  4, 2026  2:25:51 PM -->
